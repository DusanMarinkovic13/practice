<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>

<body>
    <p id="demo"></p>
    <a href='#' onclick='downloadCSV({ filename: "stock-data.csv" });'>Download CSV</a>

    <script type="text/javascript">
        var stockData = [{
            Symbol: "AAPL",
            Company: "Apple Inc.",
            Price: "132.54"
        }, {
            Symbol: "INTC",
            Company: "Intel Corporation",
            Price: "33.45"
        }, {
            Symbol: "GOOG",
            Company: "Google Inc",
            Price: "554.52"
        }, ];

        //ja dodavao
        function stampa(x) {
            x = new Array();
            for (i in x) {
                console.log(x[i][0] + ":" + x[i][0]);
            }
        }
        stampa(stockData);
        document.getElementById("demo").innerHTML = stampa(stockData);
        //____________________________________________________________________
        function convertArrayOfObjectsToCSV(args) {
            var result, ctr, keys, columnDelimiter, lineDelimiter, data;

            data = args.data || null;
            if (data == null || !data.length) {
                return null;
            }

            columnDelimiter = args.columnDelimiter || ',';
            lineDelimiter = args.lineDelimiter || '\n';

            keys = Object.keys(data[0]);

            result = '';
            result += keys.join(columnDelimiter);
            result += lineDelimiter;

            data.forEach(function(item) {
                ctr = 0;
                keys.forEach(function(key) {
                    if (ctr > 0) result += columnDelimiter;

                    result += item[key];
                    ctr++;
                });
                result += lineDelimiter;
            });

            return result;
        }

        function downloadCSV(args) {
            var data, filename, link;

            var csv = convertArrayOfObjectsToCSV({
                data: stockData
            });
            if (csv == null) return;

            filename = args.filename || 'export.csv';

            if (!csv.match(/^data:text\/csv/i)) {
                csv = 'data:text/csv;charset=utf-8,' + csv;
            }
            data = encodeURI(csv);

            link = document.createElement('a');
            link.setAttribute('href', data);
            link.setAttribute('download', filename);
            link.click();
        }
    </script>
</body>

</html>